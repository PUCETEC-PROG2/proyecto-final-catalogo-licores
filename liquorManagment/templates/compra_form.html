<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>Crear Orden de Compra</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.0-beta1/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-0evSX huddled7vJEuBfRn5qWB88FuvIWJhxuzvVu0YXdbv/j8LqYzx4WpDWuxBjy" crossorigin="anonymous" />
  </head>
  <body>
    <div class="container mt-3">
      <h1>Crear Orden de Compra</h1>
      <form method="post">
        {% csrf_token %}
        {{ order_form.as_p }}

        <h2>Productos</h2>
        <table class="table table-bordered" id="product-table">
          <thead>
            <tr>
              <th>Nombre Producto</th>
              <th>Precio Unitario</th>
              <th>Cantidad</th>
              <th>Precio Final</th>
              <th>Eliminar</th>
            </tr>
          </thead>
          <tbody>{{ order_item_formset.as_p }}</tbody>
        </table>
        <button type="button" class="btn btn-primary mb-3" id="add-product">Añadir Producto</button>
        <p>
          <b>Precio Total:</b> <span id="total-price">{{ order_form.total_price.value }}</span>
        </p>

        <button type="submit" class="btn btn-success">Registrar Orden</button>
      </form>
    </div>

    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
    <script>
          $(document).ready(function() {
            // Función para agregar una nueva fila a la tabla
            function addRow() {
                // ... (código para clonar una fila y agregarla a la tabla)
            }
        
            // Función para calcular el precio total
            function calculateTotal() {
                // ... (código para calcular el total de todos los productos)
            }
        
            // Función para eliminar una fila
            function deleteRow(row) {
                // ... (código para eliminar la fila seleccionada)
            }
        
            // Eventos
            $('#add-product').click(addRow);
            // ... (otros eventos)
        });        });
    </script>
  </body>
</html>
